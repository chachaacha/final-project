<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="potato.manager.mgrMemberMapper">
<select id="memberList" resultType="potato.manager.domain.MgrMemberDomain" parameterType="potato.manager.vo.MgrMemberVO">
	<!-- 전체회원 목록 조회 -->
	<if test="memberType == 1">
	select id,nick,join_date,birth
	from member
	<where>
	1=1 and quit='N'
	<if test="id != null and id != ''">
       and id like '%'||#{id}||'%'
         </if> 
	</where>
	</if>
	<!-- 탈퇴회원 목록 조회 -->
	<if test="memberType == 2">
	select id,nick,join_date,quit_date
	from member
	<where>
	1=1 and quit='Y'
	<if test="id != null and id != ''">
		and id '%'||#{id}||'%'
	</if>
	</where>
	</if>
	<!-- 차단회원 목록 조회 -->
	<if test="memberType == 3">
	 
	</if>
</select>

<!-- 탈퇴 회원 목록 조회 -->
<select id=""></select>

<!-- 회원 상세 정보 팝업창 -->
<select id="infoPopup" resultType="potato.manager.domain.MgrMemberDomain" parameterType="String">
	select id,nick,birth,phone,email,join_date
	from member
	where id=#{id}
</select> 

<!-- 차단팝업창에 차단사유 불러오기 -->
<select id="blockReason" resultType="potato.manager.domain.MgrBlockReasonDomain">
	select br_idx,reason
	from block_reason
</select>

<!-- 회원 차단 -->
<insert id="blockMember" parameterType="potato.manager.domain.ManagerBlockVO">
	insert into manager_block(id,block_idx,block_date)
	values(#{id},#{block_idx},sysdate)	
</insert>

<!-- 차단 해제 -->
<delete id="unblock" parameterType="String">
	delete from manager_block
	where id=#{id}
</delete>

<!-- 페이징 -->


</mapper>